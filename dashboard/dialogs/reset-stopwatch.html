<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="import" href="components/paper-button/paper-button.html">
    <style>
        .buttons {
            padding-bottom: 0!important;
            padding-right: 0!important;
        }
    </style>
</head>
<body>
    <p>Are you sure you wish to reset <b id="runnerName"></b>'s stopwatch to 00:00:00?</p>

    <div class="buttons">
        <paper-button dialog-dismiss autofocus>No, Cancel</paper-button>
        <paper-button id="reset">Yes, Reset</paper-button>
    </div>

    <script>
        var title = document.querySelector('h2');
        var runnerName = document.getElementById('runnerName');
        var resetButton = document.getElementById('reset');
        var stopwatchIndex;

        resetButton.addEventListener('click', function() {
            resetButton.setAttribute('disabled', 'true');
            nodecg.sendMessage('resetTime', stopwatchIndex, function() {
                window.frameElement.parentNode.close();
                resetButton.removeAttribute('disabled');
            });
        });

        window.setInfo = function(name, index) {
            title.innerText = 'Reset ' + name + '\'s Stopwatch';
            runnerName.innerText = name;
            stopwatchIndex = index;
        }
    </script>
</body>
</html>
